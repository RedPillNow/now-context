{"version":3,"sources":["now-context.ts"],"names":[],"mappings":"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","file":"now-context.js","sourcesContent":["namespace Now {\n\n\texport class AjaxRequest {\n\t\tprivate _method: string;\n\t\tprivate _params: any;\n\t\tprivate _payload: any;\n\t\tprivate _response: any;\n\t\tprivate _responseType: string;\n\t\tprivate _requestUrl: string;\n\t\tprivate _status: number;\n\t\tprivate _statusText: string;\n\t\tprivate _withCredentials: boolean;\n\n\t\tconstructor(obj?: any) {\n\t\t\tObject.assign(this, obj);\n\t\t}\n\n\t\tget method() {\n\t\t\treturn this._method;\n\t\t}\n\n\t\tset method(method) {\n\t\t\tthis._method = method;\n\t\t}\n\n\t\tget params() {\n\t\t\treturn this._params;\n\t\t}\n\n\t\tset params(params) {\n\t\t\tthis._params = params;\n\t\t}\n\n\t\tget payload() {\n\t\t\treturn this._payload;\n\t\t}\n\n\t\tset payload(payload) {\n\t\t\tthis._payload = payload;\n\t\t}\n\n\t\tget response() {\n\t\t\treturn this._response;\n\t\t}\n\n\t\tset response(response) {\n\t\t\tthis._response = response;\n\t\t}\n\n\t\tget responseType() {\n\t\t\treturn this._responseType;\n\t\t}\n\n\t\tset responseType(responseType) {\n\t\t\tthis._responseType = responseType;\n\t\t}\n\n\t\tget requestUrl() {\n\t\t\treturn this._requestUrl;\n\t\t}\n\n\t\tset requestUrl(requestUrl) {\n\t\t\tthis._requestUrl = requestUrl;\n\t\t}\n\n\t\tget status() {\n\t\t\treturn this._status;\n\t\t}\n\n\t\tset status(status) {\n\t\t\tthis._status = status;\n\t\t}\n\n\t\tget statusText() {\n\t\t\treturn this._statusText;\n\t\t}\n\n\t\tset statusText(statusText) {\n\t\t\tthis._statusText = statusText;\n\t\t}\n\n\t\tget withCredentials() {\n\t\t\treturn this._withCredentials;\n\t\t}\n\n\t\tset withCredentials(withCredentials) {\n\t\t\tthis._withCredentials = withCredentials;\n\t\t}\n\t}\n\n\texport class ContextItem {\n\t\tprivate _element: any;\n\t\tprivate _id: string;\n\t\tprivate _idKey: string;\n\t\tprivate _lastAjaxRequest: Now.AjaxRequest;\n\t\tprivate _model: any;\n\n\t\tget element() {\n\t\t\treturn this._element;\n\t\t}\n\n\t\tset element(element) {\n\t\t\tthis._element = element;\n\t\t}\n\n\t\tget id() {\n\t\t\tif (this.model && !this._id) {\n\t\t\t\tthis._id = this.model[this.idKey];\n\t\t\t}\n\t\t\treturn this._id;\n\t\t}\n\n\t\tget idKey() {\n\t\t\treturn this._idKey;\n\t\t}\n\n\t\tset idKey(idKey) {\n\t\t\tthis._idKey = idKey;\n\t\t}\n\n\t\tget lastAjaxRequest() {\n\t\t\treturn this._lastAjaxRequest;\n\t\t}\n\n\t\tset lastAjaxRequest(lastAjaxRequest) {\n\t\t\tthis._lastAjaxRequest = lastAjaxRequest;\n\t\t}\n\n\t\tget model() {\n\t\t\treturn this._model;\n\t\t}\n\n\t\tset model(model) {\n\t\t\tthis._model = model;\n\t\t}\n\t}\n\n\texport class PubSubListener {\n\t\tprivate _eventName: string;\n\t\tprotected _handler: any;\n\t\tprivate _context: any;\n\n\t\tconstructor(eventName, handler, context?) {\n\t\t\tthis.eventName = eventName;\n\t\t\tthis.handler = handler;\n\t\t\tthis.context = context;\n\t\t}\n\n\t\tget eventName() {\n\t\t\treturn this._eventName;\n\t\t}\n\n\t\tset eventName(eventName) {\n\t\t\tif (eventName) {\n\t\t\t\tthis._eventName = eventName;\n\t\t\t} else {\n\t\t\t\tthrow new Error('The eventName cannot be null, undefined or empty string');\n\t\t\t}\n\t\t}\n\n\t\tget handler() {\n\t\t\treturn this._handler;\n\t\t}\n\n\t\tset handler(handler: any) {\n\t\t\tif (handler) {\n\t\t\t\tif (typeof handler === 'function') {\n\t\t\t\t\tthis._handler = handler;\n\t\t\t\t} else {\n\t\t\t\t\tthrow new Error('The handler must be a function, you passed in a ' + typeof handler);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthrow new Error('The handler cannot be null, undefined or empty string');\n\t\t\t}\n\t\t}\n\n\t\tget context() {\n\t\t\treturn this._context;\n\t\t}\n\n\t\tset context(context) {\n\t\t\tthis._context = context;\n\t\t}\n\t}\n\n\texport class ReqResListener extends PubSubListener {\n\t\tprivate _resolve: any;\n\t\tprivate _reject: any;\n\t\tprivate _id: number;\n\t\tprotected _handler: any;\n\n\t\tconstructor(eventName, handler, context?) {\n\t\t\tsuper(eventName, handler, context);\n\t\t}\n\n\t\tget id() {\n\t\t\treturn this._id;\n\t\t}\n\n\t\tset id(id) {\n\t\t\tthis._id = id;\n\t\t}\n\n\t\tset handler(handler) {\n\t\t\tthis._handler = handler;\n\t\t}\n\n\t\tget resolve() {\n\t\t\treturn this._resolve;\n\t\t}\n\n\t\tset resolve(resolve) {\n\t\t\tthis._resolve = resolve;\n\t\t}\n\n\t\tget reject() {\n\t\t\treturn this._reject;\n\t\t}\n\n\t\tset reject(reject) {\n\t\t\tthis._reject = reject;\n\t\t}\n\t}\n\n\texport class PubSubEvent {\n\t\tprivate _eventName: string;\n\t\tprivate _listeners: PubSubListener[];\n\n\t\tconstructor(eventName?) {\n\t\t\tthis.eventName = eventName;\n\t\t}\n\n\t\tget eventName() {\n\t\t\treturn this._eventName;\n\t\t}\n\n\t\tset eventName(eventName) {\n\t\t\tthis._eventName = eventName;\n\t\t}\n\n\t\tget listeners() {\n\t\t\treturn this._listeners || [];\n\t\t}\n\n\t\tset listeners(listeners) {\n\t\t\tthis._listeners = listeners || [];\n\t\t}\n\t}\n\t/**\n\t * Derived from: https://gist.github.com/learncodeacademy/777349747d8382bfb722 with modification\n\t * @export\n\t * @class PubSub\n\t */\n\texport class PubSub {\n\t\tprivate _events: any;\n\t\tprivate _history: any[];\n\n\t\tconstructor() {\n\t\t\tthis._events = {};\n\t\t}\n\n\t\tget events() {\n\t\t\treturn this._events;\n\t\t}\n\n\t\tset events(events) {\n\t\t\tthis._events = events || {};\n\t\t}\n\n\t\tget history() {\n\t\t\treturn this._history || [];\n\t\t}\n\n\t\tset history(history) {\n\t\t\tthis._history = history || [];\n\t\t}\n\t\t/**\n\t\t * Subscribe a listener to an event\n\t\t * @param {any} eventName\n\t\t * @param {function} fn The callback to run\n\t\t * @param {any} context The context in which to run the callback\n\t\t */\n\t\ton(eventName, fn, context): void {\n\t\t\tif (!this._listenerExists(eventName, fn, context)) {\n\t\t\t\tlet listener = new PubSubListener(eventName, fn, context);\n\t\t\t\tthis.events[eventName] = this.events[eventName] || new Now.PubSubEvent(eventName);\n\t\t\t\tlet listeners = this.events[eventName].listeners;\n\t\t\t\tlisteners.push(listener);\n\t\t\t\tthis.events[eventName].listeners = listeners;\n\t\t\t} else {\n\t\t\t\tconsole.warn('Listener for ' + eventName + ' with callback ', fn, ' already exists!');\n\t\t\t}\n\t\t}\n\t\t/**\n\t\t * Unsubscribe a listener from an event\n\t\t *\n\t\t * @param {any} eventName\n\t\t * @param {function} fn\n\t\t */\n\t\toff(eventName, fn): void {\n\t\t\tif (this.events[eventName]) {\n\t\t\t\tfor (let i = 0; i < this.events[eventName].listeners.length; i++) {\n\t\t\t\t\tlet listener: PubSubListener = this.events[eventName].listeners[i];\n\t\t\t\t\tif (listener.handler === fn) {\n\t\t\t\t\t\tthis.events[eventName].listeners.splice(i, 1);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t/**\n\t\t * Trigger an event\n\t\t * @param {any} eventName\n\t\t * @param {any} data\n\t\t */\n\t\ttrigger(eventName, data): void {\n\t\t\tlet listeners = [];\n\t\t\tif (this.events[eventName]) {\n\t\t\t\tthis.events[eventName].listeners.forEach((listener: PubSubListener) => {\n\t\t\t\t\tif (listener.context && listener.handler && listener.handler.call) {\n\t\t\t\t\t\tlisteners.push(listener);\n\t\t\t\t\t\tlistener.handler.call(listener.context, data);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (listener.handler && typeof listener.handler === 'function') {\n\t\t\t\t\t\t\tlisteners.push(listener);\n\t\t\t\t\t\t\tlistener.handler(data);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthrow new Error('It appears that the ' + eventName + ' handler is not a function!');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis._updateHistory(eventName, listeners);\n\t\t}\n\t\t/**\n\t\t * Determine if a listener already exists for a particular event. We can only\n\t\t * really identify if a listener exists if a context is provided\n\t\t * @param {string} eventName\n\t\t * @param {any} fn The callback function\n\t\t * @param {any} context The context of the listener\n\t\t * @returns {boolean}\n\t\t */\n\t\tprivate _listenerExists(eventName: string, fn: any, context: any): boolean {\n\t\t\tif (eventName && context) {\n\t\t\t\tlet event: Now.PubSubEvent = this.events[eventName];\n\t\t\t\tif (event) {\n\t\t\t\t\tlet found = event.listeners.filter((item: PubSubListener, idx, arr) => {\n\t\t\t\t\t\treturn item.context === context && item.handler === fn && item.eventName === eventName;\n\t\t\t\t\t});\n\t\t\t\t\treturn found && found.length > 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\t/**\n\t\t * Update the history object\n\t\t * @private\n\t\t * @param {any} eventName\n\t\t * @param {any} listeners listeners that were serviced\n\t\t */\n\t\tprivate _updateHistory(eventName, listeners): void {\n\t\t\tlet dispatchedEvts = this.history;\n\t\t\tlet evtObj = {\n\t\t\t\ttime: new Date(),\n\t\t\t\teventName: eventName,\n\t\t\t\tlisteners: listeners\n\t\t\t}\n\t\t\tdispatchedEvts.push(evtObj);\n\t\t\tthis.history = dispatchedEvts;\n\t\t}\n\t}\n}\n\nnamespace NowElements {\n\tdeclare var window;\n\t/**\n\t * Manage the context of an application. All XHR requests should pass through this element and it\n\t * will keep track of all requests and store them in the context object. This element also provides\n\t * a very simple PubSub system.\n\t *\n\t * @author Keith Strickland <keith@redpillnow.com>\n\t */\n\texport class NowContext extends Polymer.Element {\n\t\tstatic get is() { return 'now-context' }\n\t\tstatic get properties() {\n\t\t\treturn {\n\t\t\t\tcontext: {\n\t\t\t\t\ttype: Object,\n\t\t\t\t\tvalue: {},\n\t\t\t\t\tnotify: true\n\t\t\t\t},\n\t\t\t}\n\t\t}\n\t\t/**\n\t\t * The PubSub system\n\t\t * @private\n\t\t * @type {Now.PubSub}\n\t\t */\n\t\tprivate pubsub: Now.PubSub;\n\t\t/**\n\t\t * The web worker\n\t\t * @private\n\t\t * @type {Worker}\n\t\t */\n\t\tprivate worker: Worker;\n\t\t/**\n\t\t * This is to keep track of a Promise's resolve/reject methods\n\t\t * @type {number}\n\t\t */\n\t\tprivate globalId: number = 0;\n\t\t/**\n\t\t * Listeners for the Request/Response system\n\t\t * @private\n\t\t * @type {any}\n\t\t */\n\t\tprivate reqResListeners = {};\n\n\t\tconstructor() {\n\t\t\tsuper();\n\t\t\tthis.pubsub = new Now.PubSub();\n\t\t}\n\t\t/**\n\t\t * Subscribe to relevant PubSub events\n\t\t */\n\t\tconnectedCallback() {\n\t\t\t// Create a global for interacting with this element\n\t\t\tsuper.connectedCallback();\n\t\t\twindow.NowContext = this;\n\t\t\tif (window.Worker) {\n\t\t\t\tthis.worker = new Worker(this.resolveUrl('now-context-worker.js'));\n\t\t\t\t(<any>this).onWorkerMsg = this._onWorkerMsg.bind(this);\n\t\t\t\tthis.worker.addEventListener('message', (<any>this).onWorkerMsg);\n\t\t\t}\n\t\t}\n\t\t/**\n\t\t * UnSubscribe to relevant PubSub events and worker message event\n\t\t *\n\t\t */\n\t\tdisconnectedCallback() {\n\t\t\tsuper.disconnectedCallback();\n\t\t\tif (window.Worker) {\n\t\t\t\tthis.worker.removeEventListener('message', (<any>this).onWorkerMsg);\n\t\t\t}\n\t\t}\n\t\t/**\n\t\t * Get a Now.ContextItem based on the ironRequest\n\t\t * @param {any} ironRequest\n\t\t * @param {Now.AjaxRequest} ajaxRequest\n\t\t * @returns {Now.ContextItem}\n\t\t */\n\t\tprivate _createContextItem(ajaxRequest: Now.AjaxRequest, idKey: string): Now.ContextItem {\n\t\t\tif (ajaxRequest) {\n\t\t\t\tlet contextItem = new Now.ContextItem();\n\t\t\t\tcontextItem.idKey = idKey;\n\t\t\t\tcontextItem.model = ajaxRequest.response;\n\t\t\t\tcontextItem.lastAjaxRequest = ajaxRequest;\n\t\t\t\treturn contextItem;\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t\t/**\n\t\t * Update this elements context property with the new ajax response\n\t\t * @private\n\t\t * @param {any} ironRequest The iron-request element\n\t\t * @param {any} ajax The iron-ajax element\n\t\t * @param {any} detail\n\t\t * @property {string} detail.ajax.idKey - The key that is the ID of the model\n\t\t * @property {any} detail.ajax.payload\n\t\t * @property {any} detail.ajax.parameters\n\t\t * @property {string} detail.ajax.contentType\n\t\t * @property {string} detail.ajax.handleAs\n\t\t * @property {string} detail.ajax.url\n\t\t * @property {any} detail.context\n\t\t * @property {HTMLElement} detail.context.element\n\t\t * @property {any} detail.context.model\n\t\t * @event nowContextItemUpdated\n\t\t * @event nowContextItemAdded\n\t\t * @returns {boolean}\n\t\t */\n\t\tprivate _updateContext(ajaxReq: Now.AjaxRequest, detail: any) {\n\t\t\ttry {\n\t\t\t\tlet response = ajaxReq.response;\n\t\t\t\tif (response) {\n\t\t\t\t\tlet contextItem = this._createContextItem(ajaxReq, detail.idKey);\n\t\t\t\t\tlet contextItemKey = this._getContextKey(ajaxReq, contextItem);\n\t\t\t\t\tlet isUrl = false;\n\t\t\t\t\tif ((contextItemKey && contextItemKey.indexOf) && (contextItemKey.indexOf('http:') > -1 || contextItemKey.indexOf('https:') > -1)) {\n\t\t\t\t\t\tisUrl = true;\n\t\t\t\t\t}\n\t\t\t\t\tlet existingContextItem = this.findContextItem(contextItemKey);\n\t\t\t\t\tlet itemMerged = false;\n\t\t\t\t\tif (existingContextItem) {\n\t\t\t\t\t\titemMerged = true;\n\t\t\t\t\t\tcontextItem = Object.assign(existingContextItem, contextItem);\n\t\t\t\t\t}\n\t\t\t\t\tlet evtName = itemMerged ? 'nowContextItemUpdated' : 'nowContextItemAdded';\n\t\t\t\t\tif (!isUrl) {\n\t\t\t\t\t\tcontextItemKey = contextItemKey ? contextItemKey : ajaxReq.requestUrl;\n\t\t\t\t\t\tlet path = 'context.' + contextItemKey;\n\t\t\t\t\t\tthis.set(path, contextItem);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t(<any> this).context[contextItemKey] = contextItem;\n\t\t\t\t\t\tthis.notifyPath('context.*', (<any> this).context[contextItemKey]);\n\t\t\t\t\t}\n\t\t\t\t\tthis.triggerEvt(evtName, contextItem);\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t} catch (e) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\t/**\n\t\t * Determine the context key and return it\n\t\t * @private\n\t\t * @param {Now.AjaxRequest} ajaxReq\n\t\t * @param {Now.ContextItem} contextItem\n\t\t * @returns {string}\n\t\t */\n\t\tprivate _getContextKey(ajaxReq: Now.AjaxRequest, contextItem: Now.ContextItem) {\n\t\t\tlet contextItemKey = null;\n\t\t\tif (Array.isArray(ajaxReq.response)) {\n\t\t\t\tcontextItemKey = ajaxReq.requestUrl;\n\t\t\t} else {\n\t\t\t\tcontextItemKey = contextItem.id;\n\t\t\t}\n\t\t\treturn contextItemKey;\n\t\t}\n\t\t/**\n\t\t * Find a context item by it's contextItemKey\n\t\t * @private\n\t\t * @param {any} contextItemKey\n\t\t * @returns {Now.ContextItem}\n\t\t */\n\t\tfindContextItem(contextItemKey): Now.ContextItem {\n\t\t\tlet context = this.get('context');\n\t\t\tif (context.hasOwnProperty(contextItemKey)) {\n\t\t\t\treturn context[contextItemKey];\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t\t/**\n\t\t * Trigger a pubsub event. This does not create a true Event or CustomEvent item\n\t\t * @param {string} eventName\n\t\t * @param {any} data\n\t\t */\n\t\ttriggerEvt(eventName, data) {\n\t\t\tthis.pubsub.trigger(eventName, data);\n\t\t}\n\t\t/**\n\t\t * Subscribe to pubsub events\n\t\t *\n\t\t * @param {any} eventName The name of the event to listen for\n\t\t * @param {function} fn The callback function\n\t\t * @param {any} context The context in which to run the callback\n\t\t */\n\t\tlistenEvt(eventName, fn, context) {\n\t\t\tthis.pubsub.on(eventName, fn, context);\n\t\t}\n\t\t/**\n\t\t * Un-Subscribe from an event\n\t\t * @param {any} eventName\n\t\t * @param {function} fn The callback for the event\n\t\t */\n\t\tunListenEvt(eventName, fn) {\n\t\t\tthis.pubsub.off(eventName, fn);\n\t\t}\n\t\t/**\n\t\t * A request response function. This is mainly used for doing an ajax\n\t\t * call. Will return a promise which can then be used to do something\n\t\t * once the request is finished\n\t\t * @param {any} payload\n\t\t * @property {any} payload.ajax Should contain an object with all the appropriate values to do the AJAX request\n\t\t * @property {string} payload.ajax.method\n\t\t * @property {string} payload.ajax.url\n\t\t * @property {any} payload.ajax.payload If doing something other than a GET this is the payload to send to the server\n\t\t * @property {any} payload.ajax.params The url parameters\n\t\t * @property {string} payload.ajax.responseType\n\t\t * @returns {Promise}\n\t\t */\n\t\treqres(payload) {\n\t\t\treturn this._sendWorkerMsg(payload);\n\t\t}\n\t\t/**\n\t\t * This creates a promise and listener to pass along to the worker. It sends the payload\n\t\t * to the worker which then does the request.\n\t\t * @private\n\t\t * @param {any} payload\n\t\t * @property {string} idKey The key for the ID\n\t\t * @property {any} payload.ajax Should contain an object with all the appropriate values to do the AJAX request\n\t\t * @property {string} payload.ajax.method\n\t\t * @property {string} payload.ajax.url\n\t\t * @property {any} payload.ajax.payload If doing something other than a GET this is the payload to send to the server\n\t\t * @property {any} payload.ajax.params The url parameters\n\t\t * @property {string} payload.ajax.responseType\n\t\t * @returns {Promise}\n\t\t */\n\t\tprivate _sendWorkerMsg(payload) {\n\t\t\tconst msgId = this.globalId++;\n\t\t\tlet listener: Now.ReqResListener = new Now.ReqResListener('reqRes' + msgId, null);\n\t\t\tlistener.id = msgId;\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tlistener.resolve = resolve;\n\t\t\t\tlistener.reject = reject;\n\t\t\t\tthis.reqResListeners[msgId] = listener;\n\t\t\t\tconst msg = {\n\t\t\t\t\tid: msgId,\n\t\t\t\t\tidKey: payload.idKey,\n\t\t\t\t\tajax: payload.ajax\n\t\t\t\t};\n\t\t\t\tthis.worker.postMessage(msg);\n\t\t\t});\n\t\t}\n\t\t/**\n\t\t * Responds to the web worker postMessage event. If processing is successful resolve\n\t\t * the Promise from _sendWorkerMsg\n\t\t * @private\n\t\t * @param {MessageEvent} evt\n\t\t * @property {any} evt.data\n\t\t * @property {Now.AjaxRequest} evt.data.ajaxReq\n\t\t * @property {number} evt.data.id\n\t\t */\n\t\tprivate _onWorkerMsg(evt: MessageEvent) {\n\t\t\tlet data = evt.data;\n\t\t\ttry {\n\t\t\t\tlet ajaxReq: Now.AjaxRequest = new Now.AjaxRequest(data.ajaxReq);\n\t\t\t\tthis._updateContext(ajaxReq, {idKey: data.idKey});\n\t\t\t\tthis.reqResListeners[data.id].resolve(ajaxReq);\n\t\t\t} catch (err) {\n\t\t\t\tthis.reqResListeners[data.id].reject(err);\n\t\t\t}\n\t\t\tdelete this.reqResListeners[data.id];\n\t\t}\n\t}\n}\n\ncustomElements.define(NowElements.NowContext.is, NowElements.NowContext);\n"]}