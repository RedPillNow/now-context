{"version":3,"sources":["now-context.ts"],"names":[],"mappings":"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","file":"now-context.js","sourcesContent":["namespace Now {\n\n\texport class AjaxRequest {\n\t\tprivate _method: string;\n\t\tprivate _params: any;\n\t\tprivate _payload: any;\n\t\tprivate _response: any;\n\t\tprivate _responseType: string;\n\t\tprivate _requestUrl: string;\n\t\tprivate _status: number;\n\t\tprivate _statusText: string;\n\t\tprivate _withCredentials: boolean;\n\n\t\tget method() {\n\t\t\treturn this._method;\n\t\t}\n\n\t\tset method(method) {\n\t\t\tthis._method = method;\n\t\t}\n\n\t\tget params() {\n\t\t\treturn this._params;\n\t\t}\n\n\t\tset params(params) {\n\t\t\tthis._params = params;\n\t\t}\n\n\t\tget payload() {\n\t\t\treturn this._payload;\n\t\t}\n\n\t\tset payload(payload) {\n\t\t\tthis._payload = payload;\n\t\t}\n\n\t\tget response() {\n\t\t\treturn this._response;\n\t\t}\n\n\t\tset response(response) {\n\t\t\tthis._response = response;\n\t\t}\n\n\t\tget responseType() {\n\t\t\treturn this._responseType;\n\t\t}\n\n\t\tset responseType(responseType) {\n\t\t\tthis._responseType = responseType;\n\t\t}\n\n\t\tget requestUrl() {\n\t\t\treturn this._requestUrl;\n\t\t}\n\n\t\tset requestUrl(requestUrl) {\n\t\t\tthis._requestUrl = requestUrl;\n\t\t}\n\n\t\tget status() {\n\t\t\treturn this._status;\n\t\t}\n\n\t\tset status(status) {\n\t\t\tthis._status = status;\n\t\t}\n\n\t\tget statusText() {\n\t\t\treturn this._statusText;\n\t\t}\n\n\t\tset statusText(statusText) {\n\t\t\tthis._statusText = statusText;\n\t\t}\n\n\t\tget withCredentials() {\n\t\t\treturn this._withCredentials;\n\t\t}\n\n\t\tset withCredentials(withCredentials) {\n\t\t\tthis._withCredentials = withCredentials;\n\t\t}\n\t}\n\n\texport class ContextItem {\n\t\tprivate _element: any;\n\t\tprivate _id: string;\n\t\tprivate _idKey: string;\n\t\tprivate _lastAjaxRequest: Now.AjaxRequest;\n\t\tprivate _model: any;\n\n\t\tget element() {\n\t\t\treturn this._element;\n\t\t}\n\n\t\tset element(element) {\n\t\t\tthis._element = element;\n\t\t}\n\n\t\tget id() {\n\t\t\tif (this.model && !this._id) {\n\t\t\t\tthis._id = this.model[this.idKey];\n\t\t\t}\n\t\t\treturn this._id;\n\t\t}\n\n\t\tget idKey() {\n\t\t\treturn this._idKey;\n\t\t}\n\n\t\tset idKey(idKey) {\n\t\t\tthis._idKey = idKey;\n\t\t}\n\n\t\tget lastAjaxRequest() {\n\t\t\treturn this._lastAjaxRequest;\n\t\t}\n\n\t\tset lastAjaxRequest(lastAjaxRequest) {\n\t\t\tthis._lastAjaxRequest = lastAjaxRequest;\n\t\t}\n\n\t\tget model() {\n\t\t\treturn this._model;\n\t\t}\n\n\t\tset model(model) {\n\t\t\tthis._model = model;\n\t\t}\n\t}\n}\n\nnamespace NowElements {\n\n\t/**\n\t * Manage the context of an application. All XHR requests should pass through this element\n\t *\n\t * @author Keith Strickland <keith@redpillnow.com>\n\t */\n\texport class NowContext extends NowElements.BaseElement {\n\t\tstatic get is() { return 'now-context' }\n\n\t\tstatic get properties() {\n\t\t\treturn {\n\t\t\t\tcontext: {\n\t\t\t\t\ttype: Object,\n\t\t\t\t\tvalue: {},\n\t\t\t\t\tnotify: true\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tattached() {\n\t\t\t// Create a global for interacting with this element\n\t\t\twindow['NowContext'] = this;\n\t\t\tdocument.addEventListener('nowcontextget', this.onGetRequest);\n\t\t\tdocument.addEventListener('nowcontextput', this.onPutRequest);\n\t\t\tdocument.addEventListener('nowcontextpost', this.onPostRequest);\n\t\t\tdocument.addEventListener('nowcontextdelete', this.onDeleteRequest);\n\t\t\tdocument.addEventListener('nowcontextpatch', this.onPatchRequest);\n\t\t\tdocument.addEventListener('nowcontextreqres', this._onRequestResponse);\n\t\t}\n\t\t/**\n\t\t * Perform a GET request and return the promise\n\t\t * @param {CustomEvent} evt\n\t\t * @property {any} evt.detail\n\t\t * @property {any} evt.detail.ajax\n\t\t * @property {any} evt.detail.ajax.payload\n\t\t * @property {any} evt.detail.ajax.parameters\n\t\t * @property {string} evt.detail.ajax.contentType\n\t\t * @property {string} evt.detail.ajax.handleAs\n\t\t * @property {string} evt.detail.ajax.url\n\t\t * @property {any} evt.detail.context\n\t\t * @property {HTMLElement} evt.detail.context.element\n\t\t * @property {any} evt.detail.context.model\n\t\t * @listens iron-signal-nowcontextget\n\t\t * @returns {Promise}\n\t\t */\n\t\tonGetRequest(evt: CustomEvent) {\n\t\t\tlet detail = evt.detail;\n\t\t\t// console.log(NowContext.is, 'onGetRequest, detail=', detail);\n\t\t\tif (detail) {\n\t\t\t\tlet ajax: any = this.$.getAjax;\n\t\t\t\tajax.params = detail.ajax.parameters;\n\t\t\t\tajax.handleAs = detail.ajax.handleAs || 'json';\n\t\t\t\tajax.url = detail.ajax.url\n\t\t\t\tajax.contentType = detail.ajax.contentType || 'application/json';\n\t\t\t\treturn ajax.generateRequest().completes\n\t\t\t\t\t.then((ironRequest) => {\n                        return this.updateContext(ironRequest, ajax, detail);\n\t\t\t\t\t})\n\t\t\t\t\t.catch((err) => {\n\t\t\t\t\t\tthrow new Error(NowContext.is + '.onGetRequest failed');\n\t\t\t\t\t});\n\t\t\t}else {\n\t\t\t\tthrow new Error(NowContext.is + ':iron-signal-nowcontextget: No detail provided in signal');\n\t\t\t}\n\t\t}\n\t\t/**\n\t\t *\n\t\t * @param {CustomEvent} evt\n\t\t * @property {any} evt.detail\n\t\t * @property {any} evt.detail.ajax\n\t\t * @property {any} evt.detail.ajax.payload\n\t\t * @property {any} evt.detail.ajax.parameters\n\t\t * @property {string} evt.detail.ajax.contentType\n\t\t * @property {string} evt.detail.ajax.handleAs\n\t\t * @property {string} evt.detail.ajax.url\n\t\t * @property {any} evt.detail.context\n\t\t * @property {HTMLElement} evt.detail.context.element\n\t\t * @property {any} evt.detail.context.model\n\t\t * @listens iron-signal-nowcontextput\n\t\t * @returns {Promise}\n\t\t */\n\t\tonPutRequest(evt: CustomEvent) {\n\t\t\tlet detail = evt.detail;\n\t\t\tif (detail) {\n\t\t\t\tlet ajax: any = this.$.putAjax;\n\t\t\t\tajax.params = detail.ajax.parameters;\n\t\t\t\tajax.handleAs = detail.ajax.handleAs || 'json';\n\t\t\t\tajax.url = detail.ajax.url\n\t\t\t\tajax.contentType = detail.ajax.contentType || 'application/json';\n\t\t\t\tajax.body = detail.ajax.payload;\n\t\t\t\treturn ajax.generateRequest().completes;\n\t\t\t}else {\n\t\t\t\tthrow new Error(NowContext.is + ',nowcontextput: No detail provided in signal');\n\t\t\t}\n\t\t}\n\t\t/**\n\t\t *\n\t\t * @param {CustomEvent} evt\n\t\t * @property {any} evt.detail\n\t\t * @property {any} evt.detail.ajax\n\t\t * @property {any} evt.detail.ajax.payload\n\t\t * @property {any} evt.detail.ajax.parameters\n\t\t * @property {string} evt.detail.ajax.contentType\n\t\t * @property {string} evt.detail.ajax.handleAs\n\t\t * @property {string} evt.detail.ajax.url\n\t\t * @property {any} evt.detail.context\n\t\t * @property {HTMLElement} evt.detail.context.element\n\t\t * @property {any} evt.detail.context.model\n\t\t * @listens iron-signal-nowcontextpost\n\t\t * @returns {Promise}\n\t\t */\n\t\tonPostRequest(evt: CustomEvent) {\n\t\t\tlet detail = evt.detail;\n\t\t\tif (detail) {\n\t\t\t\tlet ajax: any = this.$.postAjax;\n\t\t\t\tajax.params = detail.ajax.parameters;\n\t\t\t\tajax.handleAs = detail.ajax.handleAs || 'json';\n\t\t\t\tajax.url = detail.ajax.url\n\t\t\t\tajax.contentType = detail.ajax.contentType || 'application/json';\n\t\t\t\tajax.body = detail.ajax.payload;\n\t\t\t\treturn ajax.generateRequest().completes;\n\t\t\t}else {\n\t\t\t\tthrow new Error(NowContext.is + ',nowcontextpost: No detail provided in signal');\n\t\t\t}\n\t\t}\n\t\t/**\n\t\t *\n\t\t * @param {CustomEvent} evt\n\t\t * @property {any} evt.detail\n\t\t * @property {any} evt.detail.ajax\n\t\t * @property {any} evt.detail.ajax.payload\n\t\t * @property {any} evt.detail.ajax.parameters\n\t\t * @property {string} evt.detail.ajax.contentType\n\t\t * @property {string} evt.detail.ajax.handleAs\n\t\t * @property {string} evt.detail.ajax.url\n\t\t * @property {any} evt.detail.context\n\t\t * @property {HTMLElement} evt.detail.context.element\n\t\t * @property {any} evt.detail.context.model\n\t\t * @listens iron-signal-nowcontextdelete\n\t\t * @returns {Promise}\n\t\t */\n\t\tonDeleteRequest(evt: CustomEvent) {\n\t\t\tlet detail = evt.detail;\n\t\t\tif (detail) {\n\t\t\t\tlet ajax: any = this.$.deleteAjax;\n\t\t\t\tajax.params = detail.ajax.parameters;\n\t\t\t\tajax.handleAs = detail.ajax.handleAs || 'json';\n\t\t\t\tajax.url = detail.ajax.url\n\t\t\t\tajax.contentType = detail.ajax.contentType || 'application/json';\n\t\t\t\treturn ajax.generateRequest().completes;\n\t\t\t}else {\n\t\t\t\tthrow new Error(NowContext.is + ',nowcontextdelete: No detail provided in signal');\n\t\t\t}\n\t\t}\n\t\t/**\n\t\t *\n\t\t * @param {CustomEvent} evt\n\t\t * @property {any} evt.detail\n\t\t * @property {any} evt.detail.ajax\n\t\t * @property {any} evt.detail.ajax.payload\n\t\t * @property {any} evt.detail.ajax.parameters\n\t\t * @property {string} evt.detail.ajax.contentType\n\t\t * @property {string} evt.detail.ajax.handleAs\n\t\t * @property {string} evt.detail.ajax.url\n\t\t * @property {any} evt.detail.context\n\t\t * @property {HTMLElement} evt.detail.context.element\n\t\t * @property {any} evt.detail.context.model\n\t\t * @listens iron-signal-nowcontextpatch\n\t\t * @returns {Promise}\n\t\t */\n\t\tonPatchRequest(evt: CustomEvent) {\n\t\t\tlet detail = evt.detail;\n\t\t\tif (detail) {\n\t\t\t\tlet ajax: any = this.$.patchAjax;\n\t\t\t\tajax.params = detail.ajax.parameters;\n\t\t\t\tajax.handleAs = detail.ajax.handleAs || 'json';\n\t\t\t\tajax.url = detail.ajax.url\n\t\t\t\tajax.contentType = detail.ajax.contentType || 'application/json';\n\t\t\t\tajax.body = detail.ajax.payload;\n\t\t\t\treturn ajax.generateRequest().completes;\n\t\t\t}else {\n\t\t\t\tthrow new Error(NowContext.is + ',nowcontextpatch: No detail provided in signal');\n\t\t\t}\n\t\t}\n\t\t/**\n\t\t * Build a Now.AjaxRequest based on the ajax request\n\t\t * @param {any} ironRequest\n\t\t * @param {any} ajax\n\t\t * @returns {Now.AjaxRequest}\n\t\t */\n\t\tgetAjaxRequest(ironRequest, ajax): Now.AjaxRequest {\n\t\t\tif (ironRequest && ajax) {\n\t\t\t\tlet ajaxReq = new Now.AjaxRequest();\n\t\t\t\tajaxReq.response = ironRequest.response;\n\t\t\t\tajaxReq.requestUrl = ironRequest.url;\n\t\t\t\tajaxReq.status = ironRequest.status;\n\t\t\t\tajaxReq.statusText = ironRequest.statusText;\n\t\t\t\tajaxReq.responseType = ironRequest.xhr._responseType;\n\t\t\t\tajaxReq.withCredentials = ironRequest.xhr.withCredentials;\n\t\t\t\tajaxReq.payload = ajax.body;\n\t\t\t\tajaxReq.method = ajax.method;\n\t\t\t\tajaxReq.params = ajax.params;\n\t\t\t\treturn ajaxReq;\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t\t/**\n\t\t * Get a Now.ContextItem based on the ironRequest\n\t\t * @param {any} ironRequest\n\t\t * @param {Now.AjaxRequest} ajaxRequest\n\t\t * @returns {Now.ContextItem}\n\t\t */\n\t\tgetContextItem(ironRequest, ajaxRequest: Now.AjaxRequest, idKey: string): Now.ContextItem {\n\t\t\tif (ironRequest && ajaxRequest) {\n\t\t\t\tlet contextItem = new Now.ContextItem();\n\t\t\t\tcontextItem.idKey = idKey;\n\t\t\t\tcontextItem.model = ironRequest.response;\n\t\t\t\tcontextItem.lastAjaxRequest = ajaxRequest;\n\t\t\t\treturn contextItem;\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t\t/**\n\t\t * Update this elements context property with the new ajax response\n\t\t * @private\n\t\t * @param {any} ironRequest The iron-request element\n\t\t * @param {any} ajax The iron-ajax element\n\t\t * @param {any} detail\n\t\t * @property {string} detail.ajax.idKey - The key that is the ID of the model\n\t\t * @property {any} detail.ajax.payload\n\t\t * @property {any} detail.ajax.parameters\n\t\t * @property {string} detail.ajax.contentType\n\t\t * @property {string} detail.ajax.handleAs\n\t\t * @property {string} detail.ajax.url\n\t\t * @property {any} detail.context\n\t\t * @property {HTMLElement} detail.context.element\n\t\t * @property {any} detail.context.model\n\t\t * @returns {boolean}\n\t\t */\n\t\tprivate updateContext(ironRequest: any, ajax: any, detail: any) {\n\t\t\ttry {\n\t\t\t\tlet response = ironRequest.response;\n\t\t\t\tif (response) {\n\t\t\t\t\tlet ajaxReq = this.getAjaxRequest(ironRequest, ajax);\n\t\t\t\t\tlet contextItem = this.getContextItem(ironRequest, ajaxReq, detail.ajax.idKey);\n\t\t\t\t\tlet contextItemKey = this.getContextKey(ajaxReq, contextItem);\n\t\t\t\t\tlet isUrl = false;\n\t\t\t\t\tif ((contextItemKey && contextItemKey.indexOf) && (contextItemKey.indexOf('http:') > -1 || contextItemKey.indexOf('https:') > -1)) {\n\t\t\t\t\t\tisUrl = true;\n\t\t\t\t\t}\n\t\t\t\t\tlet existingContextItem = this.findContextItem(contextItemKey);\n\t\t\t\t\tif (existingContextItem) {\n\t\t\t\t\t\tcontextItem = Object.assign(existingContextItem, contextItem);\n\t\t\t\t\t}\n\t\t\t\t\tif (!isUrl) {\n\t\t\t\t\t\tlet path = 'context.' + contextItemKey;\n\t\t\t\t\t\tthis.set(path, contextItem);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t(<any> this).context[contextItemKey] = contextItem;\n\t\t\t\t\t\tthis.notifyPath('context.*', (<any> this).context[contextItemKey]);\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t} catch (e) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\t/**\n\t\t * Determine the context key and return it\n\t\t * @private\n\t\t * @param {Now.AjaxRequest} ajaxReq\n\t\t * @param {Now.ContextItem} contextItem\n\t\t * @returns {string}\n\t\t */\n\t\tprivate getContextKey(ajaxReq: Now.AjaxRequest, contextItem: Now.ContextItem) {\n\t\t\tlet contextItemKey = null;\n            if (Array.isArray(ajaxReq.response)) {\n                contextItemKey = ajaxReq.requestUrl;\n            } else {\n                contextItemKey = contextItem.id;\n            }\n            return contextItemKey;\n        }\n\t\t/**\n\t\t * Find a context item by it's contextItemKey\n\t\t * @private\n\t\t * @param {any} contextItemKey\n\t\t * @returns {Now.ContextItem}\n\t\t */\n\t\tfindContextItem(contextItemKey): Now.ContextItem {\n\t\t\tlet context = this.get('context');\n\t\t\tif (context.hasOwnProperty(contextItemKey)) {\n\t\t\t\treturn context[contextItemKey];\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t\t/**\n\t\t * This is a basic request/response event handler\n\t\t * @param {CustomEvent} evt\n\t\t */\n\t\tprivate _onRequestResponse(evt: CustomEvent) {\n\t\t\tlet detail = evt.detail;\n\n\t\t}\n\n\t\tprivate _dispatchEvent(options): Event {\n\t\t\tlet event: Event = null;\n\t\t\toptions = options || {};\n\t\t\tif (options.type && options.target) {\n\t\t\t\tlet node = options.target || window;\n\t\t\t\tlet bubbles = options.bubbles === undefined ? true : options.bubbles;\n\t\t\t\tlet cancelable = Boolean(options.cancelable);\n\t\t\t\tevent = new Event(options.type, {bubbles: bubbles, cancelable: cancelable})\n\t\t\t\tevent['detail'] = options.detail;\n\t\t\t\tnode.dispatchEvent(event);\n\t\t\t} else {\n\t\t\t\tthrow new Error('Event options must include an event \"type\" and event \"target\"');\n\t\t\t}\n\t\t\treturn event;\n\t\t}\n\t}\n}\n\ncustomElements.define(NowElements.NowContext.is, NowElements.NowContext);\n"]}